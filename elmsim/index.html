<!doctype html>
<link rel="stylesheet" href="styles/chat.css" />
<link rel="stylesheet" href="styles/simulation.css" />

<body>
  <div></div>
  <script src="elm.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.9.1/d3.js"></script>
  <script>
    var app = Elm.Main.fullscreen();

    var simModel = null;

    d3.select(".simulation").append("svg");

    app.ports.renderNetwork.subscribe(function(model) {
      //d3.select(".simulation").html("<pre>"+JSON.stringify(model, null, '\t')+"</pre>");

      var svg = d3.select("svg");

      simModel = model;

      console.log("runn");

      var circles = svg.selectAll("circle")
          .data(model.pvPanels)

      circles.enter()
             .append("circle")
             .attr("cx", function(pvPanel) { return pvPanel.x; })
             .attr("cy", function(pvPanel) { return pvPanel.y; })
             .attr("r", 10)
             .style("fill", "#abcd11");

      circles.attr("cx", function(pvPanel) { return pvPanel.x; })
             .attr("cy", function(pvPanel) { return pvPanel.y; })
             .attr("r", 10);

    });

  </script>
</body>
